<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>PAPRECA hybrid off-lattice kMC/MD simulator: Download and Installation</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">PAPRECA hybrid off-lattice kMC/MD simulator
   &#160;<span id="projectnumber">2.0.0 (17 September 2024)</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('md_installation.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Download and Installation </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="installation"></a> </p>
<h1><a class="anchor" id="download"></a>
PAPRECA repository and download</h1>
<p>The source code of PAPRECA is stored and can be downloaded/pulled from this <a href="https://github.com/sntioudis/papreca">GitHub repository</a>.</p>
<p>To clone the latest PAPRECA repository on your machine execute the following commands:</p>
<div class="fragment"><div class="line">git clone -b release https://github.com/sntioudis/papreca.git mypapreca #Add the latest PAPRECA repository to a folder named mypapreca</div>
</div><!-- fragment --><h2><a class="anchor" id="autobuild"></a>
PAPRECA autobuild</h2>
<p>The quickest way to install PAPRECA is by using the autobuild script located in ./Installation/autobuild. Running the autobuild script can be as simple as executing the following bash command form the ./Installation/autobuild/ directory of the PAPRECA project:</p>
<div class="fragment"><div class="line">bash build_PAPRECA.sh</div>
</div><!-- fragment --><p>The autobuild script pulls LAMMPS from the official Github repository, builds LAMMPS with the fix papreca command, and finally, builds PAPRECA.</p>
<blockquote class="doxtable">
<p><b>Note 1:</b> At the moment, building with autobuild will generate a LAMMPS library that includes the following packages: <b>EXTRA-DUMP</b>, <b>MOLECULE</b>, <b>RIGID</b>, <b>QEQ</b>, <b>REAXFF</b>, <b>REPLICA</b>, <b>KSPACE</b>, <b>KOKKOS</b>, <b>MEAM</b>. Modify the <b>package_args</b> variable of the build_LAMMPS.sh script (located in the ./Installation/autobuild/ directory of the PAPRECA project) to build with different packages, if necessary. </p>
</blockquote>
<blockquote class="doxtable">
<p><b>Note 2:</b> Compiler and build options for both LAMMPS and PAPRECA can be added to either the build_LAMMPS.sh or build_PAPRECA.sh scripts, if necessary. </p>
</blockquote>
<blockquote class="doxtable">
<p><b>CAUTION</b>: In case the user desires to install PAPRECA manually (or if autobuild fails), LAMMPS will have to be installed manually with the papreca fix. Then, PAPRECA will have to be built using either cmake or a traditional make method (see sections bellow for more information). </p>
</blockquote>
<h1><a class="anchor" id="beforeInstall"></a>
Read before you install MANUALLY: Important notes and prerequisites</h1>
<p>&bull; Copy <a class="el" href="fix__papreca_8h.html">fix_papreca.h</a> and <a class="el" href="fix__papreca_8cpp.html">fix_papreca.cpp</a> files from the PAPRECA source files (located in ./source/libraries/LAMMPS/ of the pulled PAPRECA directory) to the LAMMPS source files (located in ./src/ of the pulled LAMMPS directory). This will install LAMMPS with the fix papreca command option which is necessary to run PAPRECA (see <a class="el" href="md_commands.html#FIX_papreca">fix papreca command</a> for more information).</p>
<p>&bull; <a href="https://docs.lammps.org/Install.html">Build LAMMPS</a> as a <b>shared</b> library (with any optional LAMMPS packages that you intend to use) before you build PAPRECA. The minimum working LAMMPS version (tag) is: patch_15Sep2022. Version patch_15Sep2022 and any later release version have been tested with PAPRECA and are expected to function properly. Nevertheless, users are advised to use the latest working LAMMPS version (patch_29Aug2024).</p>
<p>The following snippet demonstrates (briefly) how LAMMPS can be built as a shared library with a few optional packages:</p>
<div class="fragment"><div class="line">git clone --depth 1 --branch patch_29Aug2024 https://github.com/lammps/lammps.git mylammps #clone LAMMPS with tag patch_17Apr2024 to a folder named mylammps</div>
<div class="line">cd mylammps</div>
<div class="line">mkdir build; cd build</div>
<div class="line">cmake -DPKG_EXTRA-DUMP=on -DPKG_MOLECULE=on -DPKG_RIGID=on -DPKG_QEQ=on -DPKG_REAXFF=on -DBUILD_LIB=on -DBUILD_SHARED_LIBS=on ../cmake #Configure LAMMPS, build with some optional package, and enable lib building as well as shared libraries</div>
<div class="line">cmake --build . #make -j N (where N is the number of processes) can also be used for multicore installation</div>
</div><!-- fragment --><blockquote class="doxtable">
<p><b>Note 1:</b> To run all the examples in the ./Examples/ folder (see <a class="el" href="md_examples.html#examples">examples</a>) you must build your LAMMPS library with the following packages: <b>EXTRA-DUMP</b>, <b>MOLECULE</b>, <b>RIGID</b>, and <b>QEQ</b>. </p>
</blockquote>
<p>&bull; The current version of PAPRECA (1.0) runs only on LINUX-based systems. Cross-platform compatibility will be available in future versions. At the moment, non-LINUX users can run PAPRECA on a virtual machine (e.g., <a href="https://www.virtualbox.org/">VirtualBox</a> or Windows Subsystem for Linux).</p>
<p>&bull; An MPI/C++ compiler (e.g., mpicxx or mpiCC) that is at least compatible with the C++11 standard is required to build PAPRECA.</p>
<p>&bull; After configuring the LAMMPS build, kindly ensure that the MPI package has been correctly configured. If the MPI package is not configured, cmake will build a non-MPI LAMMPS version which will lead to PAPRECA linkage errors. If the installed MPI compiler in your system is not detected by cmake, you should add the following argument to your cmake configuration command: -DCMAKE_CXX_COMPILER=/path/to/your/cxx/compiler. Hint: the relevant cxx compiler path can be obtained by running: 'which compiler_name' (e.g., 'which mpicxx'). It is advised that the same flag (i.e., -DCMAKE_CXX_COMPILER) is also used for the configuration of LAMMPS.</p>
<p>&bull; Exactly the same package (e.g., MPI protocol, MPI/C++ compiler, openMP) versions have to be used when building LAMMPS and PAPRECA. You will probably encounter linking errors if there is a package version mismatch.</p>
<h1><a class="anchor" id="build"></a>
Building PAPRECA manually</h1>
<p>After building LAMMPS as a library, PAPRECA can be built using a Traditional Make approach or a <a href="https://cmake.org/">CMake</a> approach. However, mixed Traditional Make/CMake builds should be avoided! If you installed PAPRECA using a traditional Make approach you should remove all associated libraries, dependency files, and executables before re-building with CMake (and vice versa).</p>
<h2><a class="anchor" id="cmake"></a>
CMake</h2>
<p>Building both LAMMPS and PAPRECA with CMake is generally recommended since it does not require the manual specification of installation packages (e.g., MPI/C++ compiler). However, some modifications to the CMakelists.txt file might have to be made if your machine includes many different installation package versions.</p>
<p>To build PAPRECA with CMake you should execute the following commands in the cloned PAPRECA repository:</p>
<div class="fragment"><div class="line">mkdir build; cd build</div>
<div class="line">cmake ../Installation/CMake -DLAMMPS_SRC_DIR=/path/to/LAMMPS/source -DLAMMPS_LIB_DIR=/path/to/LAMMPS/library #Replace paths with YOUR source (./src LAMMPS directory) and library (typically ./build LAMMPS directory) paths.</div>
<div class="line">cmake --build . #make -j N (where N is the number of processes) can also be used for multicore installation</div>
</div><!-- fragment --><p>Where, you must replace the relevant paths with your source (./src LAMMPS directory) and library (typically ./build LAMMPS directory) LAMMPS .</p>
<blockquote class="doxtable">
<p><b>Note:</b> To build PAPRECA with debug symbols you must also include the following flag: "-DBUILD_DEBUG=ON". If such flag is ignored, CMake will build PAPRECA without debug symbols and with the following C++ compiler optimization flag: -O3. </p>
</blockquote>
<h2><a class="anchor" id="traditionalMake"></a>
Traditional Make</h2>
<p>An example traditional "MakeFile" together with a "MakeConfig" file are located in this project directory: Installation/Traditional Make/. Before building the project the user should modify the "MakeConfig" file. Specifically, the following paths must be updated:</p>
<p>&bull; The "BUILDDIR" variable should point at the PAPRECA build directory. Make sure the directory exists before you build.</p>
<p>&bull; The "LAMMPS" variable should point at the main-parent LAMMPS directory. Note that, this directory neither the ./src or ./build paths (i.e., your input directory is the folder containing both build and src folders).</p>
<p>After configuring the relevant paths in "MakeConfig" the "traditionalMakeCompileLIBandSRC.sh" script (included in the Installation/Traditional Make/ directory) can be executed to build the PAPRECA libraries and the papreca executable (in the specified build folder):</p>
<div class="fragment"><div class="line">bash traditionalMakeCompileLIBandSRC.sh</div>
</div><!-- fragment --><p>This is what the "traditionalMakeCompileLIBandSRC.sh" script does in detail:</p>
<div class="fragment"><div class="line">#Install PAPRECA library</div>
<div class="line">cd ../../source/libraries/PAPRECA/</div>
<div class="line">make -f MakeFile clean</div>
<div class="line">make -f MakeFile</div>
<div class="line"> </div>
<div class="line">cd ../../../Installation/Traditional\ Make/</div>
<div class="line">mkdir ../../TraditionalMakeBuild</div>
<div class="line"> </div>
<div class="line">make -f MakeFile clean</div>
<div class="line">make -f MakeFile</div>
</div><!-- fragment --><p>To remove all associated libraries, dependency files, and executables of a Traditional Make build you can use the "traditionalMakeClean.sh" (included in the Installation/Traditional Make/ directory).</p>
<div class="fragment"><div class="line">bash traditionalMakeClean.sh</div>
</div><!-- fragment --><p>This is what the script "traditionalMakeClean.sh" does in detail:</p>
<div class="fragment"><div class="line">#Uninstall PAPRECA library</div>
<div class="line">cd ../../source/libraries/PAPRECA/</div>
<div class="line">make -f MakeFile clean</div>
<div class="line">rm libKMC.a</div>
<div class="line"> </div>
<div class="line">cd ../../../Installation/Traditional\ Make/</div>
<div class="line">rm -R ../../TraditionalMakeBuild</div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
